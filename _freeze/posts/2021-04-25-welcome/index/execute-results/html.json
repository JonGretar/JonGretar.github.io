{
  "hash": "6c61376746798c269067319e38053154",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"First Quarto post\"\ndescription: |\n  This is just a demo post. The idea is to test the capabilities of Quarto as a\n  blogging platform. In this post I am just trying out a few capabilities of\n  Quarto and how well it is suited to the kinds of things I would like to write\n  about. Amongst other things. However, time will tell on how well I can focus\n  on writing articles here.\ndate: 04-25-2021\nimage: index_files/figure-html/final-1.png\nbibliography: library.bib\ncategories:\n  - R\n  - Quarto\noutput:\n  distill::distill_article:\n    self_contained: false\n    toc: true\n    toc_float: true\n---\n\n\n\n\n\n## Why Quarto?\n\nThere are a few reasons for why I would like to try\n[Quarto](https://quarto.org) [@quarto] as my blogging platform. As I want to\nwrite more things of scientific nature I would like to be able to easily cite\narticles. For example later in this example page I use volume functions from\nthe article *Single-tree biomass and stem volume functions for eleven tree\nspecies used in Icelandic forestry* [@arnórsnorrason2006].\n\nOther reasons are the capabilities of working with the data right in the\nblogging system and creating the charts and tables in the same area as I write\nthe post.\n\n## Working with data\n\nFor example we have the following data that I would like to work with.\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"tree\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"stofn\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"species\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"diam1\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"diam2\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"height_measured\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"1\",\"3\":\"RG\",\"4\":\"5.0\",\"5\":\"5.1\",\"6\":\"NA\"},{\"1\":\"2\",\"2\":\"2\",\"3\":\"RG\",\"4\":\"14.7\",\"5\":\"14.6\",\"6\":\"8.38\"},{\"1\":\"3\",\"2\":\"3\",\"3\":\"RG\",\"4\":\"12.7\",\"5\":\"13.4\",\"6\":\"NA\"},{\"1\":\"4\",\"2\":\"4\",\"3\":\"RG\",\"4\":\"13.2\",\"5\":\"13.8\",\"6\":\"8.66\"},{\"1\":\"5\",\"2\":\"5\",\"3\":\"RG\",\"4\":\"4.5\",\"5\":\"4.7\",\"6\":\"NA\"},{\"1\":\"6\",\"2\":\"6\",\"3\":\"RG\",\"4\":\"10.3\",\"5\":\"10.8\",\"6\":\"NA\"},{\"1\":\"7\",\"2\":\"7\",\"3\":\"RG\",\"4\":\"5.0\",\"5\":\"4.0\",\"6\":\"4.65\"},{\"1\":\"8\",\"2\":\"8\",\"3\":\"RG\",\"4\":\"12.0\",\"5\":\"12.0\",\"6\":\"NA\"},{\"1\":\"9\",\"2\":\"9\",\"3\":\"RG\",\"4\":\"11.0\",\"5\":\"11.3\",\"6\":\"NA\"},{\"1\":\"10\",\"2\":\"10\",\"3\":\"RG\",\"4\":\"4.5\",\"5\":\"4.0\",\"6\":\"NA\"},{\"1\":\"11\",\"2\":\"11\",\"3\":\"RG\",\"4\":\"8.5\",\"5\":\"8.2\",\"6\":\"NA\"},{\"1\":\"12\",\"2\":\"12\",\"3\":\"RG\",\"4\":\"9.8\",\"5\":\"9.9\",\"6\":\"NA\"},{\"1\":\"13\",\"2\":\"13\",\"3\":\"RG\",\"4\":\"11.2\",\"5\":\"11.5\",\"6\":\"7.52\"},{\"1\":\"14\",\"2\":\"14\",\"3\":\"RG\",\"4\":\"11.6\",\"5\":\"11.3\",\"6\":\"NA\"},{\"1\":\"15\",\"2\":\"15\",\"3\":\"RG\",\"4\":\"6.4\",\"5\":\"6.4\",\"6\":\"NA\"},{\"1\":\"16\",\"2\":\"16\",\"3\":\"RG\",\"4\":\"7.2\",\"5\":\"6.7\",\"6\":\"NA\"},{\"1\":\"17\",\"2\":\"17\",\"3\":\"RG\",\"4\":\"9.0\",\"5\":\"8.7\",\"6\":\"NA\"},{\"1\":\"18\",\"2\":\"18\",\"3\":\"RG\",\"4\":\"9.2\",\"5\":\"9.2\",\"6\":\"NA\"},{\"1\":\"19\",\"2\":\"19\",\"3\":\"RG\",\"4\":\"7.5\",\"5\":\"7.3\",\"6\":\"NA\"},{\"1\":\"20\",\"2\":\"20\",\"3\":\"RG\",\"4\":\"11.8\",\"5\":\"11.6\",\"6\":\"NA\"},{\"1\":\"21\",\"2\":\"21\",\"3\":\"RG\",\"4\":\"8.2\",\"5\":\"8.7\",\"6\":\"NA\"},{\"1\":\"22\",\"2\":\"22\",\"3\":\"RG\",\"4\":\"11.9\",\"5\":\"11.8\",\"6\":\"NA\"},{\"1\":\"23\",\"2\":\"23\",\"3\":\"RG\",\"4\":\"8.7\",\"5\":\"8.0\",\"6\":\"NA\"},{\"1\":\"24\",\"2\":\"24\",\"3\":\"RG\",\"4\":\"8.2\",\"5\":\"8.2\",\"6\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\nFirst I would like to do basic manipulation of the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntrees$dbh <- (trees$diam1 + trees$diam2) / 2\ntrees$ba <- (trees$dbh/200)^2 * pi\n```\n:::\n\n\n\nFor the next trick we use linear regressions to calculate the expected height\nof the trees. We then use `coalesce()` to copy back the height we already knew.\nFrom there we can calculate the volume of each tree using the volume functions\n[@arnórsnorrason2006].\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntrees$height <- lm(height_measured ~ ba, data=trees) %>% \n  predict(trees)\ntrees$height <- coalesce(trees$height_measured, trees$height)\n\ntrees$v <- 0.1299 * trees$dbh^1.6834 * trees$height^0.8598\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/final-1.png){width=672}\n:::\n:::\n\n\n\n## Math with R\n\nUsing LaTeX math symbols we can communicate mathematical functions in a nice\nmanner. For example we can talk about BAL as described by Arne Pommerening's\nexcellent article [*Basal area in larger trees and the growth compensation\npoint*](https://blogg.slu.se/forest-biometrics/2017/05/26/basal-area-in-larger-trees-and-the-growth-compensation-point/)\nwhere he explains BAL as such:\n\n> *BAL* is related to available light, since with increasing basal area of\n> larger trees there is less light available for smaller trees. In a sense\n> *BAL* is a surrogate for light measurements with the benefit that stem\n> diameters and basal area are easier to measure.\n\n$$BAL_i(t) = G(t) \\cdot (1 - p_i(t)) \\text{ where } p_i(t) = \\frac{1}{G(t)} \\sum_{\\leq g_i(t)} g_i(t)$$\n\nHe also give us an example function in R. Let us use it to calculate the BAL of\nindividual trees in our example data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbal <- function(ba, area) {\n sumba <- sum(ba)\n basmaller <- 0\n pix <- 0\n bal <- 0\n for (i in 1 : length(ba)) {\n   bax <- ba[i]\n   basmaller <- sum(ba[ba <= bax])\n   pix <- basmaller / sumba\n   bal[i] <- sumba * (1 - pix) / area\n }\n return(bal)\n}\n# An then run it for out 0.54ha example stand.\ntrees$bal <- bal(trees$ba, 0.54/10000)\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}