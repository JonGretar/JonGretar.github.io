[
  {
    "path": "posts/2021-04-25-welcome/",
    "title": "First Distill post",
    "description": "This is just a demo post. The idea is to test the capabilities of Distill as a blogging platform. In this post I am just trying out a few capabilities of Distill and how well it is suited to the kinds of things I would like to write about. Amongst other things. However, time will tell on how well I can focus on writing articles here.",
    "author": [],
    "date": "2021-04-25",
    "categories": [],
    "contents": "\n\nContents\nWhy Distill?\nWorking with data\nMath with R\n\nWhy Distill?\nThere are a few reasons for why I would like to try Distill as my blogging platform. As I want to write more things of scientific nature I would like to be able to easily cite articles. For example later in this example page I use volume functions from the article Single-tree biomass and stem volume functions for eleven tree species used in Icelandic forestry (Arnór Snorrason and Stefán Freyr Einarsson 2006).\nOther reasons are the capabilities of working with the data right in the blogging system and creating the charts and tables in the same area as I write the post.\nWorking with data\nFor example we have the following data that I would like to work with.\n\n\n\n{\"columns\":[{\"label\":[\"tree\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"stofn\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"species\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"diam1\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"diam2\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"height_measured\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"1\",\"3\":\"RG\",\"4\":\"5.0\",\"5\":\"5.1\",\"6\":\"NA\"},{\"1\":\"2\",\"2\":\"2\",\"3\":\"RG\",\"4\":\"14.7\",\"5\":\"14.6\",\"6\":\"8.38\"},{\"1\":\"3\",\"2\":\"3\",\"3\":\"RG\",\"4\":\"12.7\",\"5\":\"13.4\",\"6\":\"NA\"},{\"1\":\"4\",\"2\":\"4\",\"3\":\"RG\",\"4\":\"13.2\",\"5\":\"13.8\",\"6\":\"8.66\"},{\"1\":\"5\",\"2\":\"5\",\"3\":\"RG\",\"4\":\"4.5\",\"5\":\"4.7\",\"6\":\"NA\"},{\"1\":\"6\",\"2\":\"6\",\"3\":\"RG\",\"4\":\"10.3\",\"5\":\"10.8\",\"6\":\"NA\"},{\"1\":\"7\",\"2\":\"7\",\"3\":\"RG\",\"4\":\"5.0\",\"5\":\"4.0\",\"6\":\"4.65\"},{\"1\":\"8\",\"2\":\"8\",\"3\":\"RG\",\"4\":\"12.0\",\"5\":\"12.0\",\"6\":\"NA\"},{\"1\":\"9\",\"2\":\"9\",\"3\":\"RG\",\"4\":\"11.0\",\"5\":\"11.3\",\"6\":\"NA\"},{\"1\":\"10\",\"2\":\"10\",\"3\":\"RG\",\"4\":\"4.5\",\"5\":\"4.0\",\"6\":\"NA\"},{\"1\":\"11\",\"2\":\"11\",\"3\":\"RG\",\"4\":\"8.5\",\"5\":\"8.2\",\"6\":\"NA\"},{\"1\":\"12\",\"2\":\"12\",\"3\":\"RG\",\"4\":\"9.8\",\"5\":\"9.9\",\"6\":\"NA\"},{\"1\":\"13\",\"2\":\"13\",\"3\":\"RG\",\"4\":\"11.2\",\"5\":\"11.5\",\"6\":\"7.52\"},{\"1\":\"14\",\"2\":\"14\",\"3\":\"RG\",\"4\":\"11.6\",\"5\":\"11.3\",\"6\":\"NA\"},{\"1\":\"15\",\"2\":\"15\",\"3\":\"RG\",\"4\":\"6.4\",\"5\":\"6.4\",\"6\":\"NA\"},{\"1\":\"16\",\"2\":\"16\",\"3\":\"RG\",\"4\":\"7.2\",\"5\":\"6.7\",\"6\":\"NA\"},{\"1\":\"17\",\"2\":\"17\",\"3\":\"RG\",\"4\":\"9.0\",\"5\":\"8.7\",\"6\":\"NA\"},{\"1\":\"18\",\"2\":\"18\",\"3\":\"RG\",\"4\":\"9.2\",\"5\":\"9.2\",\"6\":\"NA\"},{\"1\":\"19\",\"2\":\"19\",\"3\":\"RG\",\"4\":\"7.5\",\"5\":\"7.3\",\"6\":\"NA\"},{\"1\":\"20\",\"2\":\"20\",\"3\":\"RG\",\"4\":\"11.8\",\"5\":\"11.6\",\"6\":\"NA\"},{\"1\":\"21\",\"2\":\"21\",\"3\":\"RG\",\"4\":\"8.2\",\"5\":\"8.7\",\"6\":\"NA\"},{\"1\":\"22\",\"2\":\"22\",\"3\":\"RG\",\"4\":\"11.9\",\"5\":\"11.8\",\"6\":\"NA\"},{\"1\":\"23\",\"2\":\"23\",\"3\":\"RG\",\"4\":\"8.7\",\"5\":\"8.0\",\"6\":\"NA\"},{\"1\":\"24\",\"2\":\"24\",\"3\":\"RG\",\"4\":\"8.2\",\"5\":\"8.2\",\"6\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  \n\nFirst I would like to do basic manipulation of the data.\n\n\ntrees$dbh <- (trees$diam1 + trees$diam2) / 2\ntrees$ba <- (trees$dbh/200)^2 * pi\n\n\n\nFor the next trick we use linear regressions to calculate the expected height of the trees. We then use coalesce() to copy back the height we already knew. From there we can calculate the volume of each tree using the volume functions (Arnór Snorrason and Stefán Freyr Einarsson 2006).\n\n\ntrees$height <- lm(height_measured ~ ba, data=trees) %>% \n  predict(trees)\ntrees$height <- coalesce(trees$height_measured, trees$height)\n\ntrees$v <- 0.1299 * trees$dbh^1.6834 * trees$height^0.8598\n\n\n\n\n\n\nMath with R\nUsing LaTeX math symbols we can communicate mathematical functions in a nice manner. For example we can talk about BAL as described by Arne Pommerening’s excellent article Basal area in larger trees and the growth compensation point where he explains BAL as such:\n\nBAL is related to available light, since with increasing basal area of larger trees there is less light available for smaller trees. In a sense BAL is a surrogate for light measurements with the benefit that stem diameters and basal area are easier to measure.\n\n\\[BAL_i(t) = G(t) \\cdot (1 - p_i(t)) \\text{ where } p_i(t) = \\frac{1}{G(t)} \\sum_{\\leq g_i(t)} g_i(t)\\]\nHe also give us an example function in R. Let us use it to calculate the BAL of individual trees in our example data.\n\n\nbal <- function(ba, area) {\n sumba <- sum(ba)\n basmaller <- 0\n pix <- 0\n bal <- 0\n for (i in 1 : length(ba)) {\n   bax <- ba[i]\n   basmaller <- sum(ba[ba <= bax])\n   pix <- basmaller / sumba\n   bal[i] <- sumba * (1 - pix) / area\n }\n return(bal)\n}\n# An then run it for out 0.54ha example stand.\ntrees$bal <- bal(trees$ba, 0.54/10000)\n\n\n\n\n\n\nArnór Snorrason, and Stefán Freyr Einarsson. 2006. “Single-Tree Biomass and Stem Volume Functions for Eleven Tree Species Used in Icelandic Forestry.” Icelandic Agricultural Sciences, 15–24. https://www.semanticscholar.org/paper/Single-tree-biomass-and-stem-volume-functions-for-Snorrason-Einarsson/6668a0d8e81f7c32c0a0926d99b3451c9c69c160.\n\n\n\n\n",
    "preview": "posts/2021-04-25-welcome/welcome_files/figure-html5/regression_plot-1.png",
    "last_modified": "2021-12-31T15:48:47+00:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  }
]
